<!DOCTYPE html>
<html>
<head><title>WS Test</title></head>
<body>
<h1>WebSocket Test</h1>
<div id="status">未连接</div>
<div id="messages"></div>
<script>
const token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjo0LCJ1c2VybmFtZSI6ImFkbWluIiwiZW1haWwiOiJhZG1pbkBleGFtcGxlLmNvbSIsImlzcyI6Imdpbi13ZWItZnJhbWV3b3JrIiwiZXhwIjoxNzU2MDQ0Nzg0LCJuYmYiOjE3NTU5NTgzODQsImlhdCI6MTc1NTk1ODM4NH0.S16wdafD8aHShXcAoXLN4Of16NNqJrKL6f_sPSBM3zs';
const ws = new WebSocket(`ws://localhost:8080/api/v1/ws?token=${token}`);

ws.onopen = () => {
    document.getElementById('status').textContent = '已连接';
    document.getElementById('status').style.color = 'green';
};

ws.onmessage = (event) => {
    const div = document.createElement('div');
    div.textContent = '收到: ' + event.data;
    document.getElementById('messages').appendChild(div);
};

ws.onerror = (error) => {
    document.getElementById('status').textContent = '连接错误';
    document.getElementById('status').style.color = 'red';
    console.error('WebSocket error:', error);
};
</script>
</body>
</html>
